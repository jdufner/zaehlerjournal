<h1>Erfassung<br/><small>{{immobilie.adresse}}</small></h1>

<form novalidate class="simple-form" name="form" role="form" ng-controller="ErfassungCtrl">
  <div class="form-group" ng-repeat="z in immobilie.zaehlers">
    <ng-form name="formgroup">
      <label for="{{z.id}}">{{z.art.art}} ({{z.art.einheit}}), Letzter Stand: {{z.aktuellerZaehlerstand}}</label>
      <input id="{{z.id}}" name="zaehlerstand" type="number" class="form-control" placeholder="{{z.art.einheit}}" ng-model="z.zaehlerstand" ng-required min="100"/>
      <span ng-show="formgroup.zaehlerstand.$dirty">{{z.art.art}} erfasst!</span>
      <span ng-show="formgroup.zaehlerstand.$dirty && formgroup.zaehlerstand.$invalid">
        Validierung fehlgeschlagen
        <span ng-show="formgroup.zaehlerstand.$error.required">Bitte einen Zählerstand eingeben.</span>
        <span ng-show="formgroup.zaehlerstand.$error.min">Wert muss größer 100 sein.</span>
      </span>
    </ng-form>
  </div>
  <button type="submit" class="btn btn-default" ng-click="saveZaehler()">Speichern</button>
</form>

<h1>Zählerstände</h1>

<div ng-repeat="z in immobilie.zaehlers">
  <h2>{{z.art.art}} {{z.nr}} ({{z.typ.art}})</h2>
  <table class="table table-striped table-hover">
    <tr>
      <th>Datum</th>
      <th>Stand</th>
    </tr>
    <tr ng-repeat="zaehlerstand in z.zaehlerstaende">
      <td>{{zaehlerstand.datum}}</td>
      <td>{{zaehlerstand.stand}} {{z.art.einheit}}</td>
    </tr>
  </table>
</div>
